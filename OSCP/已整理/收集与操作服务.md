# 收集与操作服务

## 信息收集

### DNS(53)

用途：

找域名

找DC

找主机名

Zone Transfer

👉信息型王者

### LDAP（389/636）

用途：

枚举域

枚举用户/组

判断AD结构

👉AD情报核心

### RPC/NetBIOS（135/139）

用途：

用户/组信息

域信息

SID/RID

👉Windows枚举辅助

### SNMP（161）

用途：

用户名

网络配置

运行服务

明文字符串

👉低频爆炸

### HTTP/HTTPS（80/443）

用途：

识别WEB应用

版本信息

功能点

👉前期是信息收集

但Web也能上传WebShell

### SMTP（25）

用途：

用户枚举（VRFY/EXPN）

邮箱格式判断

👉偶尔送用户列表

## 直接实施操作/利用

### SMB（445）

用途：

读文件

写文件

登录

横向移动

Pass-The-Hash

👉信息+操作

### FTP（21）

用途：

匿名登录

写Webshell

上传反弹程序

👉经典送Shell服务

### SSH（22）

用途：

直接登录

稳定Shell

👉有凭据

### RDP（3389）

用途：

远程桌面

GUI操作

本地提权

👉Windows稳定入口

### WinRM（5985/5986）

用途：

远程PowerShell

横向移动

👉AD横向神器

### MSSQL/MYSQL/PostgreSQL

用途：

SQL注入

xp_cmdshell

写文件

执行命令

👉数据库=高价值操作

### HTTP/HTTPS(80/443)

当出现：

文件上传

命令执行

WebShell

LFI->RCE

👉Web从信息->操作

## 双重信息服务

| 服务  | 信息阶段  | 操作阶段              |
| ----- | --------- | --------------------- |
| SMB   | 枚举share | 登录/PTH              |
| HTTP  | 目录/版本 | RCE/SHELL             |
| MSSQL | 枚举DB    | 命令执行(xp_cmdshell) |

## 服务优先级

1.【先看】（DNS/LDAP/SMB）

2.【找入口】（FTP/WEB/SMB/SQL）

3.【拿Shell】（WEB/SMB/SSH/RDP）

4.【横向】(SMB/WINRM/RDP)