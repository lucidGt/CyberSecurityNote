# 常用命令

## Linux

### 1）身份/权限判断

id

groups

### 2）sudo能力（90%提权起点）

sudo -l

### 3）SUID程序

find / -type f -perm -4000 2>/dev/null

### 4）系统/内核

uname -a

cat /etc/os-release

### 5）可写文件

find / -writable -type f 2>/dev/null

### 6）计划任务/服务

crontab -l

cat /etc/crontab

ps aux

### 7）能力（capabilities）

getcap -r / 2>/dev/null

### 8）网络（横向/服务判断）

ip a

ss -lntp

## Windows

### 1）我是谁

whoami

### 2）组（是不是管理员）

whoami /groups

### 3）特权

whoami /priv

SeImpersonatePrivilege

SeAssignPrimaryToken

SeDebugPrivilege

### 4）系统信息（漏洞/架构）

systeminfo

### 5）本机用户/组

net user

net localgroup

### 6）管理员判断

net session

### 7）服务

sc query

sc qc 服务名

### 8）计划任务

schtasks /query /fo LIST /v

### 9）网络

ifconfig /all

netstat -ano

### 10）进程

tasklist

### whoami /priv 是灵魂

## Linux<=>Windows对照表

| 思维            | Linux    | Windows        |
| --------------- | -------- | -------------- |
| 我是谁          | id       | whoami         |
| 权限能力        | sudo -l  | whoami /priv   |
| 组              | groups   | whoami /groups |
| root/SYSTEM执行 | cron     | 服务/任务      |
| 程序提权        | SUID     | 服务劫持       |
| 系统信息        | uname -a | systeminfo     |

## 必要

### Linux

 id

groups

sudo -l

find / -type f -perm -4000 2>/dev/null

uname -a

### Windows

whoami

whoami /groups

whoami /priv

systeminfo