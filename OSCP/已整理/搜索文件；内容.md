

# 搜索文件、内容

## 工具

| Linux          | cmd     | powershell    |
| -------------- | ------- | ------------- |
| rg、grep、find | findstr | Get-ChildItem |





# 搜索文件名（FileName）

## find

| 参数        | 意思                                 |
| ----------- | ------------------------------------ |
| . / /       | 从哪里开始找（当前/根目录）          |
| -type f     | 只匹配文件（不含目录），只匹配目录 d |
| -name       | 按文件名模式匹配（区分大小写）       |
| -iname      | 按文件名模式匹配（忽略大小写）       |
| 2>/dev/null | 把错误输出丢掉                       |



### 1.当前目录递归找*.ini

find . -type f -name "*.ini"

### 2.从根目录找并忽略权限错误

find / -type f -name "*.ini" 2>/dev/null

### 3.忽略大小写

find . -type f -iname "*.ini"

## windows cmd:dir

| 参数  | 意思                                              |
| ----- | ------------------------------------------------- |
| /s    | 递归子目录                                        |
| /b    | “裸格式”输出（只输出路径/文件名，不要标题和汇总） |
| *.ini | 通匹配符：匹配所有ini                             |

注意：Windows文件系统通常对文件名大小写不敏感，所以cmd不需要专门“忽略大小写”

### 1.当前目录递归找 *ini

dir /s /b *.ini

### 2.指定路径（例如C:\\Users)

dir C:\\usres /s /b *.ini

## windows powershell

| 参数                                   | 意思                              |
| -------------------------------------- | --------------------------------- |
| . / c:\Users                           | 从哪里开始找                      |
| -Recurse                               | 递归子目录                        |
| -Filter *.ini                          | 文件名过滤                        |
| -File                                  | 只要文件                          |
| -ErrorAction SilentlyContinue          | 遇到无权限错误默默跳过            |
| select-object -Expandproperty FullName | 只输出 FullName属性（完整字符串） |

### 1.当前目录递归找*.ini,输出完整路径

Get-ChildItem . -Recurse -Filter *.ini -ErrorAction SilentlyContinue | % FullName

Get-ChildItem . -Recurse -Filter *.ini -ErrorAction SilentlyContinue | Select-Object -Expandproperty FullName





# 搜索文件内容（FileContent）

## Linux:grep

| 参数              | 意思           |
| ----------------- | -------------- |
| -R                | 递归子目录     |
| -I                | 跳过二进制文件 |
| -i                | 忽略大小写     |
| -n                | 显示行号       |
| --include "*.ini" | 只匹配*.ini    |



### 1）递归+忽略大小写+行号

grep -Rin "password" .

### 2）只搜索某类文件

grep -Rin --include "*.ini" "password"、

## Linux:rg

| 参数       | 意思       |
| ---------- | ---------- |
| -i         | 忽略大小写 |
| -n         | 显示行号   |
| -g "*.ini" | 文件名过滤 |

#### 3）rg（更快更好用）

rg -in "password"

rg -in "password" -g "*.ini"

## windows CMD:findstr

| 参数         | 意思                 |
| ------------ | -------------------- |
| /S           | 递归搜索子目录       |
| /I           | 忽略大小写           |
| /N           | 显示行号             |
| /M           | 只输出命中文件名内容 |
| \*.\*/\*.ini | 搜索范围（匹配文件） |

### 1）递归+忽略大小写+行号（所有文件）

findstr /I /S /N "password" \*.\*

### 2）只搜索ini

findstr /I /S /N "password" \*.ini

### 3）只输出“命中的文件名”（不输出匹配行）

findstr /I /S /N /M "password" \*.ini

## windows Powershell：Select-String（等价grep）

### 1）GetChildItem参数

| 参数                          | 意思       |
| ----------------------------- | ---------- |
| -Recurse                      | 递归遍历   |
| -Filter \*.ini                | 文件名过滤 |
| -File                         | 只要文件   |
| -ErrorAction SilentlyContinue | 错误跳过   |

### 2）Select-String

| 参数                  | 意思                |
| --------------------- | ------------------- |
| -Pattern "..."        | 搜索内容关键词/模式 |
| -CaseSensitive:$false | 忽略大小写          |

### 3）Select-Object

| 参数                 | 意思       |
| -------------------- | ---------- |
| -ExpandProperty Path | 只输出路径 |
| -Unique              | 去重复     |

### 4）全目录递归搜索（忽略大小写）

Get-ChildItem . -Recurse -File -ErrorAction SilentlyContinue | Select-String -Pattern "password" -CaseSensitive:$false

### 5）只搜索ini

Get-ChildItem . -Recurse -File -Filter "*.ini" -ErrorAction SilentlyContinue | Select-String -Pattern "password" -CaseSensitive:$false

### 6）只输出“命中的文件路径”（去重）

Get-ChildItem . -Recurse -File -Filter "*.ini" -ErrorAction SilentlyContinue | Select-String -pattern "password" -CaseSensitive:$false | Select-Object -ExpandProperty Path -Unique